// Generated by CoffeeScript 1.7.1
var angularInjector, es;

es = require('event-stream');

angularInjector = require('angular-injector');

module.exports = function(opts) {
  return es.map(function(file, cb) {
    var err;
    if (!/\.js$/.test(file.path)) {
      return cb(null, file);
    }
    try {
      file.contents = new Buffer(angularInjector.annotate(file.contents.toString(), opts));
      return cb(null, file);
    } catch (_error) {
      err = _error;
      return cb(err);
    }
  });
};
